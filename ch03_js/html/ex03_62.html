<!DOCTYPE html>
<html>
<head>

<script src="../utils/utils.js"></script>

<!-- head js -->
<script type="text/javascript">
	
	var url = "ws://echo.websocket.org";
	var demo;
	
	function init() {
		demo = document.getElementById("demo");
		callWebSocket();
	}
	
	function callWebSocket() {
		ws = new WebSocket(url);
		ws.onopen = function(event) { onOpen(event) }
		ws.onclose = function(event) { onClose(event) }
		ws.onmessage = function(event) { onMessage(event) }
		ws.onerror = function(event) { onError(event) }
	}
	
	function onOpen(event) {
		printToScreen("접속 성공");
		doSend("hello webSocket");
	}
	
	function onClose(event) {
		printToScreen("접속 종료");
	}
	
	function onMessage(event) {
		printToScreen("<span style = 'color: blue;'> 수신 메세지 : {0}</span>".format(event.data));
	}
	
	function onError(event) {
		printToScreen("<span style = 'color: red;'> 에러 발생 : {0}</span>".format(event.data));
	}
	
	function printToScreen(message) {
		var pre = document.createElement("p");
		pre.style.wordWrap = "break-word";
		pre.innerHTML = message;
		
		demo.appendChild(pre);
	}
	
	function doSend(message) {
		printToScreen("송신 메세지:{0}".format(message));
		ws.send(message);
	}
	
	window.addEventListener("load", init, false);
	
</script>

<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

	<h2>Web Socket Test</h2>
	
	<div id="demo"></div>

<!-- body js -->
<script type="text/javascript">
	
	
	
</script>

</body>
</html>